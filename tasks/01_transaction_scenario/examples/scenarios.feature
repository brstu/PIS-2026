Feature: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∏—Å–∫ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
  –ö–∞–∫ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ø–æ–∏—Å–∫–æ–≤–æ-—Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç—Ä—è–¥–∞
  –Ø —Ö–æ—á—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∏—Å–∫ –ø—Ä–æ–ø–∞–≤—à–∏—Ö –ª—é–¥–µ–π –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã
  –ß—Ç–æ–±—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

  Background:
    Given –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ "petrov@rescue-southwest.by" —Å —Ä–æ–ª—å—é "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä"
    And –≤ —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–ª–æ–Ω—Ç—ë—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "AVAILABLE"
    And —Å–µ—Ä–≤–∏—Å –≥–µ–æ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–µ–Ω

  # ========================================
  # –£–°–ü–ï–®–ù–´–ô –°–¶–ï–ù–ê–†–ò–ô (Happy Path)
  # ========================================
  
  Scenario: –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
    Given –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –∑–≤–æ–Ω–æ–∫ –æ –ø—Ä–æ–ø–∞–≤—à–µ–º —á–µ–ª–æ–≤–µ–∫–µ
    And –≤ —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å 5 –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "AVAILABLE"
    And —Å–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞ "2024-11-08"
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
      | –ü–æ–ª–µ              | –ó–Ω–∞—á–µ–Ω–∏–µ                                  |
      | –§–ò–û –ø—Ä–æ–ø–∞–≤—à–µ–≥–æ    | –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á –ü–µ—Ç—Ä–æ–≤                      |
      | –í–æ–∑—Ä–∞—Å—Ç           | 67                                        |
      | –û–ø–∏—Å–∞–Ω–∏–µ          | –í—ã—à–µ–ª —É—Ç—Ä–æ–º –∏–∑ –¥–æ–º–∞, —Å—Ç—Ä–∞–¥–∞–µ—Ç –ø–æ—Ç–µ—Ä–µ–π –ø–∞–º—è—Ç–∏ |
      | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–π–æ–Ω–∞ | lat=53.9045, lon=27.5615                   |
      | –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞     | 5 –∫–º                                       |
      | –°—Ä–æ—á–Ω–æ—Å—Ç—å         | URGENT                                     |
      | –ö–æ–Ω—Ç–∞–∫—Ç –∑–∞—è–≤–∏—Ç–µ–ª—è | +375291234567                              |
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø—É:
      | –†–æ–ª—å                | –£—á–∞—Å—Ç–Ω–∏–∫                    |
      | –°—Ç–∞—Ä—à–∏–π –≥—Ä—É–ø–ø—ã      | –°–∏–¥–æ—Ä–æ–≤ –°.–°.                |
      | –í–æ–ª–æ–Ω—Ç—ë—Ä            | –ò–≤–∞–Ω–æ–≤ –ò.–ò.                 |
      | –í–æ–ª–æ–Ω—Ç—ë—Ä            | –ü–µ—Ç—Ä–æ–≤–∞ –ü.–ü.                |
      | –í–æ–ª–æ–Ω—Ç—ë—Ä            | –ö–æ–∑–ª–æ–≤ –ö.–ö.                 |
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç —á–µ–∫-–ª–∏—Å—Ç —Å–Ω–∞—Ä—è–∂–µ–Ω–∏—è:
      | –°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ  |
      | GPS         |
      | –†–∞—Ü–∏—è       |
      | –ê–ø—Ç–µ—á–∫–∞     |
      | –§–æ–Ω–∞—Ä—å      |
      | –ö–æ–º–ø–∞—Å      |
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –≥—Ä—É–ø–ø—É –Ω–∞ –∑–æ–Ω—É "North"
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID "REQ-2024-0142"
    And –∑–∞—è–≤–∫–∞ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å "IN_PROGRESS"
    And —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –Ω–∞ 4 –∑–æ–Ω—ã:
      | ID    | –ù–∞–∑–≤–∞–Ω–∏–µ | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞        | –°—Ç–∞—Ç—É—Å      |
      | Z-001 | North    | lat=53.9095, lon=27.5615 | ASSIGNED    |
      | Z-002 | South    | lat=53.8995, lon=27.5615 | NOT_ASSIGNED|
      | Z-003 | East     | lat=53.9045, lon=27.5715 | NOT_ASSIGNED|
      | Z-004 | West     | lat=53.9045, lon=27.5515 | NOT_ASSIGNED|
    And —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –≥—Ä—É–ø–ø—É —Å ID "G-42" –∏ —Å—Ç–∞—Ç—É—Å–æ–º "FORMING"
    And –≥—Ä—É–ø–ø–∞ "G-42" –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–∞ –∑–æ–Ω—É "Z-001"
    And –∑–æ–Ω–∞ "Z-001" –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å "ASSIGNED" –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –≥—Ä—É–ø–ø—É "G-42"
    And —Å–∏—Å—Ç–µ–º–∞ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è:
      | –°–æ–±—ã—Ç–∏–µ              | –î–∞–Ω–Ω—ã–µ                                      |
      | RequestCreated       | request_id=REQ-2024-0142, timestamp=2024-11-08T09:00:00Z |
      | GroupFormed          | group_id=G-42, members=4, timestamp=2024-11-08T09:02:00Z |
      | GroupAssignedToZone  | group_id=G-42, zone_id=Z-001, timestamp=2024-11-08T09:02:30Z |
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –≥—Ä—É–ø–ø—ã:
      | –ü–æ–ª—É—á–∞—Ç–µ–ª—å   | –°–æ–æ–±—â–µ–Ω–∏–µ                                          |
      | –°–∏–¥–æ—Ä–æ–≤ –°.–°. | –í—ã –Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Å—Ç–∞—Ä—à–∏–º –≥—Ä—É–ø–ø—ã G-42 –¥–ª—è –∑–∞—è–≤–∫–∏ REQ-2024-0142 |
      | –ò–≤–∞–Ω–æ–≤ –ò.–ò.  | –í—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ –≥—Ä—É–ø–ø—É G-42 –¥–ª—è –∑–∞—è–≤–∫–∏ REQ-2024-0142   |
      | –ü–µ—Ç—Ä–æ–≤–∞ –ü.–ü. | –í—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ –≥—Ä—É–ø–ø—É G-42 –¥–ª—è –∑–∞—è–≤–∫–∏ REQ-2024-0142   |
      | –ö–æ–∑–ª–æ–≤ –ö.–ö.  | –í—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ –≥—Ä—É–ø–ø—É G-42 –¥–ª—è –∑–∞—è–≤–∫–∏ REQ-2024-0142   |
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SMS —Å—Ç–∞—Ä—à–µ–º—É –≥—Ä—É–ø–ø—ã "–°–∏–¥–æ—Ä–æ–≤ –°.–°." —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∑–æ–Ω—ã "North"
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ó–∞—è–≤–∫–∞ #REQ-2024-0142 —Å–æ–∑–¥–∞–Ω–∞. –ì—Ä—É–ø–ø–∞ G-42 –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–∞ –∑–æ–Ω—É North. –£—á–∞—Å—Ç–Ω–∏–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω—ã."
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ä—Ç—É —Å 4 –∑–æ–Ω–∞–º–∏ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø–æ–π

  # ========================================
  # –°–¶–ï–ù–ê–†–ò–ò –° –û–®–ò–ë–ö–ê–ú–ò
  # ========================================

  Scenario: –û—à–∏–±–∫–∞ ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–π–æ–Ω–∞ –Ω–µ –≤–∞–ª–∏–¥–Ω—ã (GPS —Å–æ—à—ë–ª —Å —É–º–∞ üß≠)
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
      | –ü–æ–ª–µ              | –ó–Ω–∞—á–µ–Ω–∏–µ               |
      | –§–ò–û –ø—Ä–æ–ø–∞–≤—à–µ–≥–æ    | –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°–∏–¥–æ—Ä–æ–≤      |
      | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–π–æ–Ω–∞ | lat=95.0, lon=200.0    |
      | –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞     | 5 –∫–º                   |
    Then —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    And —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –∫–æ–¥–æ–º "INVALID_COORDINATES"
    And —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ: lat[-90,90], lon[-180,180]"
    And –∑–∞—è–≤–∫–∞ –ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    And —Å–æ–±—ã—Ç–∏–µ "RequestCreated" –ù–ï –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–∫–∞–∑–∞–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å GPS! üß≠"
    And –ø–æ–ª—è "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–π–æ–Ω–∞" –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã –∫—Ä–∞—Å–Ω—ã–º

  Scenario: –û—à–∏–±–∫–∞ ‚Äî —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
      | –ü–æ–ª–µ              | –ó–Ω–∞—á–µ–Ω–∏–µ                    |
      | –§–ò–û –ø—Ä–æ–ø–∞–≤—à–µ–≥–æ    | –ú–∞—Ä–∏—è –ö–æ–≤–∞–ª—ë–≤–∞              |
      | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–π–æ–Ω–∞ | lat=53.9045, lon=27.5615    |
      | –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞     | 150 –∫–º                      |
    Then —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞
    And —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ (max 100 –∫–º)
    And —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Å –∫–æ–¥–æ–º "RADIUS_TOO_LARGE"
    And —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 100 –∫–º"
    And –∑–∞—è–≤–∫–∞ –ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–†–∞–¥–∏—É—Å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –î–ª—è –±–æ–ª—å—à–∏—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞—è–≤–æ–∫."
    And –ø–æ–ª–µ "–†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞" –ø–æ–¥—Å–≤–µ—á–µ–Ω–æ –∫—Ä–∞—Å–Ω—ã–º

  Scenario: –û—à–∏–±–∫–∞ ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤
    Given –≤—Å–µ –≤–æ–ª–æ–Ω—Ç—ë—Ä—ã –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å "BUSY" –∏–ª–∏ "UNAVAILABLE"
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "NEW"
    And —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "NO_AVAILABLE_VOLUNTEERS"
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã"
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å:
      | –û–ø—Ü–∏—è                          | –î–µ–π—Å—Ç–≤–∏–µ                                 |
      | –û—Ç–ª–æ–∂–∏—Ç—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã   | –ó–∞—è–≤–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "PENDING_GROUP"|
      | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ä–æ—á–Ω–æ—Å—Ç—å –Ω–∞ CRITICAL | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤|
    And –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç "–û—Ç–ª–æ–∂–∏—Ç—å":
      | –†–µ–∑—É–ª—å—Ç–∞—Ç                                                                  |
      | –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "PENDING_GROUP"                             |
      | –°–∏—Å—Ç–µ–º–∞ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ "GroupFormationPending"                          |
      | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –Ω–∞–π—Ç–∏ –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤  |

  Scenario: –û—à–∏–±–∫–∞ ‚Äî –≤–æ–ª–æ–Ω—Ç—ë—Ä —É–∂–µ –∑–∞–Ω—è—Ç (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
    Given –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—ã–±—Ä–∞–ª –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞ "–ò–≤–∞–Ω–æ–≤ –ò.–ò." —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "AVAILABLE"
    And –¥—Ä—É–≥–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–∑–Ω–∞—á–∏–ª "–ò–≤–∞–Ω–æ–≤ –ò.–ò." –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞—è–≤–∫—É
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É —Å "–ò–≤–∞–Ω–æ–≤ –ò.–ò."
    Then —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤
    And —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ —Å—Ç–∞—Ç—É—Å "–ò–≤–∞–Ω–æ–≤ –ò.–ò." –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ "BUSY"
    And —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Å –∫–æ–¥–æ–º "VOLUNTEER_ALREADY_ASSIGNED"
    And —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–í–æ–ª–æ–Ω—Ç—ë—Ä –ò–≤–∞–Ω–æ–≤ –ò.–ò. —É–∂–µ –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞—è–≤–∫—É"
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
    And —Å–∏—Å—Ç–µ–º–∞ –ù–ï –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (–∑–∞—è–≤–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "NEW")
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–í–æ–ª–æ–Ω—Ç—ë—Ä—ã —É–∂–µ –∑–∞–Ω—è—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–∏—Ö."
    And —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

  # ========================================
  # –°–ë–û–ò –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–´
  # ========================================

  Scenario: –¢–∞–π–º–∞—É—Ç —Å–µ—Ä–≤–∏—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (SMS-—à–ª—é–∑ –ª—ë–≥)
    Given "Notification Service" –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Ç–∞–π–º–∞—É—Ç 10 —Å–µ–∫—É–Ω–¥)
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø—É
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å ID "REQ-2024-0143" –∏ —Å—Ç–∞—Ç—É—Å–æ–º "IN_PROGRESS"
    And –∑–∞—è–≤–∫–∞ –∏ –≥—Ä—É–ø–ø–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    And —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å SMS –∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ "Notification Service"
    And "Notification Service" –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥
    And —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç "TimeoutException"
    And —Å–∏—Å—Ç–µ–º–∞ –ù–ï –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –∏ –≥—Ä—É–ø–ø—ã (–¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ë–î)
    And —Å–∏—Å—Ç–µ–º–∞ –ø–æ–º–µ—â–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
    And —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Å —É—Ä–æ–≤–Ω–µ–º "WARNING":
      """
      NotificationService timeout for request REQ-2024-0143, notifications queued for retry
      """
    And —Å–∏—Å—Ç–µ–º–∞ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ "NotificationFailed" –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–æ–∑–∂–µ. –ú–æ–∂–Ω–æ –ø–æ–∑–≤–æ–Ω–∏—Ç—å —Å—Ç–∞—Ä—à–µ–º—É –≤—Ä—É—á–Ω—É—é."
    And –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ "notification_queue":
      | request_id    | recipient     | type | status  | retry_count | next_retry_at       |
      | REQ-2024-0143 | –°–∏–¥–æ—Ä–æ–≤ –°.–°.  | SMS  | pending | 0           | 2024-11-08T09:05:00 |
      | REQ-2024-0143 | –°–∏–¥–æ—Ä–æ–≤ –°.–°.  | PUSH | pending | 0           | 2024-11-08T09:05:00 |
      | REQ-2024-0143 | –ò–≤–∞–Ω–æ–≤ –ò.–ò.   | PUSH | pending | 0           | 2024-11-08T09:05:00 |

  Scenario: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
    Given "Database" –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (connection refused)
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
      | –ü–æ–ª–µ              | –ó–Ω–∞—á–µ–Ω–∏–µ                    |
      | –§–ò–û –ø—Ä–æ–ø–∞–≤—à–µ–≥–æ    | –¢–µ—Å—Ç–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫            |
      | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–π–æ–Ω–∞ | lat=53.9045, lon=27.5615    |
      | –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞     | 5 –∫–º                        |
    Then —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –≤ –ë–î
    And —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç "DatabaseConnectionException"
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –≤—Å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    And –∑–∞—è–≤–∫–∞ –ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è
    And –∑–æ–Ω—ã –ù–ï —Å–æ–∑–¥–∞—é—Ç—Å—è
    And —Å–æ–±—ã—Ç–∏–µ "RequestCreated" –ù–ï –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è
    And —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
    And —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É —Å —É—Ä–æ–≤–Ω–µ–º "ERROR":
      """
      Failed to create request: Database connection failed
      """
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏–ª–∏ —Å–≤—è–∂–∏—Å—å —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π."
    And HTTP –æ—Ç–≤–µ—Ç –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–¥ 503 (Service Unavailable)

  Scenario: –°–±–æ–π —Å–µ—Ä–≤–∏—Å–∞ –≥–µ–æ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –∑–æ–Ω—ã)
    Given —Å–µ—Ä–≤–∏—Å –≥–µ–æ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —Ä–∞–π–æ–Ω–∞
    Then —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞–∑–±–∏—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –Ω–∞ –∑–æ–Ω—ã
    And —Å–µ—Ä–≤–∏—Å –≥–µ–æ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É "GeoServiceException"
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞–∑–±–∏—Ç—å —Ä–∞–π–æ–Ω –Ω–∞ –∑–æ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã."
    And –∑–∞—è–≤–∫–∞ –ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è
    And HTTP –æ—Ç–≤–µ—Ç –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–¥ 500 (Internal Server Error)

  # ========================================
  # –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–¨
  # ========================================

  Scenario: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–∏–∫–∞—Ç
    Given –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–∏–ª —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É"
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –±—ã—Å—Ç—Ä–æ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É" –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ (double-click)
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –û–î–ù–£ –∑–∞—è–≤–∫—É
    And –≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∂–µ request_id —á—Ç–æ –∏ –ø–µ—Ä–≤—ã–π
    And –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ 1 –∑–∞–ø–∏—Å—å –¥–ª—è —ç—Ç–æ–π –∑–∞—è–≤–∫–∏
    And –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ó–∞—è–≤–∫–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞"

  # ========================================
  # –ì–†–ê–ù–ò–ß–ù–´–ï –°–õ–£–ß–ê–ò
  # ========================================

  Scenario: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–¥–∏—É—Å–æ–º –ø–æ–∏—Å–∫–∞
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å —Ä–∞–¥–∏—É—Å–æ–º –ø–æ–∏—Å–∫–∞ "0.5 –∫–º"
    Then —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞—è–≤–∫—É
    And —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –Ω–∞ 4 –∑–æ–Ω—ã —Å —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–º —Ä–∞–¥–∏—É—Å–æ–º
    And –∑–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

  Scenario: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –¥–æ–ø—É—Å—Ç–∏–º—ã–º —Ä–∞–¥–∏—É—Å–æ–º
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —Å —Ä–∞–¥–∏—É—Å–æ–º –ø–æ–∏—Å–∫–∞ "100 –∫–º"
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É —É—Å–ø–µ—à–Ω–æ
    And –∑–∞—è–≤–∫–∞ –∏–º–µ–µ—Ç —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ "100 –∫–º"

  Scenario: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (–±–µ–∑ —á–µ–∫-–ª–∏—Å—Ç–∞)
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è —á–µ–∫-–ª–∏—Å—Ç–∞ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏—è
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –∏ –≥—Ä—É–ø–ø—É
    And –ø–æ–ª–µ "equipment_checklist" –≤ –ë–î –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ NULL
    And –≥—Ä—É–ø–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–µ–∑ —á–µ–∫-–ª–∏—Å—Ç–∞

  Scenario: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º (1 —á–µ–ª–æ–≤–µ–∫)
    When –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø—É —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç–∞—Ä—à–∏–º –±–µ–∑ –≤–æ–ª–æ–Ω—Ç—ë—Ä–æ–≤
    Then —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –≥—Ä—É–ø–ø—É —Å 1 —É—á–∞—Å—Ç–Ω–∏–∫–æ–º
    And –≥—Ä—É–ø–ø–∞ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å "FORMING"
    And —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—É "–ì—Ä—É–ø–ø–∞ –∏–∑ 1 —á–µ–ª–æ–≤–µ–∫–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞."


