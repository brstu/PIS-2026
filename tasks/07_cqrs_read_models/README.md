# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ7. CQRS –∏ Read Models (–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏)

**–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:** –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–∏—Å—Ç–µ–º  
**–¢–µ–º–∞:** CQRS, Event Sourcing, Materialized Views

---

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **CQRS** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –º–æ–¥–µ–ª–µ–π:
- **Write Model** ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã (Request)
- **Read Model** ‚Äî –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è

- **–ü—Ä–∏–º–µ–Ω—è—Ç—å** CQRS –ø–∞—Ç—Ç–µ—Ä–Ω
- **–°–æ–∑–¥–∞–≤–∞—Ç—å** Read Models (–ø—Ä–æ–µ–∫—Ü–∏–∏)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –∑–∞–ø—Ä–æ—Å—ã

---

## –ó–∞–¥–∞–Ω–∏–µ

### –ß–∞—Å—Ç—å 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

**Write Model** (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Request):
- –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, —Å–æ–±—ã—Ç–∏—è

**Read Model** (RequestView):
- –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —á—Ç–µ–Ω–∏—è

üìñ **–ü—Ä–∏–º–µ—Ä:** [examples/cqrs/read_model/request_view.py](examples/cqrs/read_model/request_view.py)

---

### –ß–∞—Å—Ç—å 2. Event-Driven Synchronization

–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ Request ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è `RequestCreated` ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `RequestView`.

üìñ **–ü—Ä–∏–º–µ—Ä:** [examples/cqrs/projection/request_projection.py](examples/cqrs/projection/request_projection.py)

---

### –ß–∞—Å—Ç—å 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

**–ò–Ω–¥–µ–∫—Å—ã, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.**

üìñ **–ü—Ä–∏–º–µ—Ä:** [examples/sql/materialized_view.sql](examples/sql/materialized_view.sql)

---

<!-- START:artifacts -->
## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç–∞

üìÑ **[–ú–∞–∫–µ—Ç –æ—Ç—á—ë—Ç–∞ ‚Üí](–ú–∞–∫–µ—Ç_–æ—Ç—á–µ—Ç–∞.md)**

```
lab-07/
‚îú‚îÄ‚îÄ –û—Ç—á–µ—Ç.md
‚îú‚îÄ‚îÄ cqrs/
‚îÇ   ‚îú‚îÄ‚îÄ write_model/       # Request (aggregate)
‚îÇ   ‚îú‚îÄ‚îÄ read_model/        # RequestView (projection)
‚îÇ   ‚îî‚îÄ‚îÄ projection/        # Event handlers
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ test_projection.py
```
<!-- END:artifacts -->

<!-- START:criteria -->
## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ë–∞–ª–ª—ã | –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è |
|----------|-------|------------|
| Write Model: –∞–≥—Ä–µ–≥–∞—Ç —Å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ | 20 | Request –∏–∑ Lab #3 |
| Read Model: –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è | 25 | RequestView —Å joins |
| Event-Driven Sync: –ø—Ä–æ–µ–∫—Ü–∏–∏ | 25 | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ | 15 | –ò–Ω–¥–µ–∫—Å—ã, EXPLAIN |
| –¢–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ü–∏–π | 10 | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| –ö–∞—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | 5 | –î–∏–∞–≥—Ä–∞–º–º—ã, README |
| **–ò–¢–û–ì–û** | **100** | |
<!-- END:criteria -->

<!-- START:bonuses -->
## –ë–æ–Ω—É—Å—ã (+ –¥–æ 15)

* **Event Sourcing** (+6) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤–º–µ—Å—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
* **Materialized Views (PostgreSQL)** (+5) ‚Äî –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
* **Redis –¥–ª—è Read Model** (+4) ‚Äî –∫—ç—à –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
<!-- END:bonuses -->

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. **–í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É CQRS –∏ CQS?**
2. **–ü–æ—á–µ–º—É Read Model –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è?**
3. **–ö–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –ø—Ä–∏ —Å–±–æ–µ?**
4. **–ß—Ç–æ —Ç–∞–∫–æ–µ Eventual Consistency?**

---

## –°—Ä–æ–∫ —Å–¥–∞—á–∏

**–ù–µ–¥–µ–ª—è 14-15 —Å–µ–º–µ—Å—Ç—Ä–∞**
